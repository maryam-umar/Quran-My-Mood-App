<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/css/styles.css"> 
    <title>Quran My Mood</title>
    <script>
        async function fetchVerse() {
            const mood = document.getElementById('mood').value;
            if (!mood) {
                alert('Please select a mood.');
                return;
            }
            
            try {
                const response = await fetch(`https://amaluomar.pythonanywhere.com/api/verse?mood=${mood}`);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                if (data.error) {
                    document.getElementById('result').innerHTML = `<p>${data.error}</p>`;
                } else {
                    document.getElementById('result').innerHTML = `
                        <h2>Verse for ${data.mood}</h2>
                        <p><strong>Arabic:</strong> ${data.arabic}</p>
                        <p><strong>Translation:</strong> ${data.translation}</p>
                    `;
                }
            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
                document.getElementById('result').innerHTML = `<p>There was an error fetching the verse. Please try again later.</p>`;
            }
        }
    </script>
</head>
<body>
    <h1>Quran My Mood</h1>
    <form id="mood-form" onsubmit="event.preventDefault(); fetchVerse();">
        <label for="mood">What are you feeling?</label>
        <select name="mood" id="mood">
            <option value="">Select a mood</option>
            <option value="anxiety">Anxiety</option>
            <option value="fear">Fear</option>
            <option value="sadness">Sadness</option>
            <option value="anger">Anger</option>
            <option value="joy">Joy</option>
            <option value="reassurance">Reassurance</option>
        </select>
        <input type="submit" value="Get Verse">
    </form>
    
    <div id="result"></div>

    <footer id="site-footer">
        <p id="footer-email">For any issues and suggestions, contact <a href="mailto:m.umar.py3@gmail.com" class="email-link">m.umar.py3@gmail.com</a></p>
    </footer>
</body>
</html>
